"use strict";(self.webpackChunk_coreui_coreui_free_react_admin_template=self.webpackChunk_coreui_coreui_free_react_admin_template||[]).push([[6768],{86768:function(e,t,a){a.r(t);var n=a(1413),s=a(29439),r=a(72791),l=a(57689),i=a(84951),c=a(30212),o=a(18491),u=(a(24021),a(77710),a(9085)),d=(a(5462),a(63263)),h=a(72426),m=a.n(h),f=a(21830),p=a.n(f),x=a(59513),g=a.n(x),j=(a(10303),a(78983)),v=a(80184),b=m()(new Date).format("YYYY-MM-DD");t.default=function(){var e=(0,r.useState)({startDate:new Date,master:null,program:null,class:null,loader:!1}),t=(0,s.Z)(e,2),a=t[0],h=t[1],f=(0,r.useState)([]),x=(0,s.Z)(f,2),S=(x[0],x[1]),Z=(0,r.useState)([]),w=(0,s.Z)(Z,2),y=(w[0],w[1],(0,r.useState)([])),D=(0,s.Z)(y,2),N=(D[0],D[1],(0,r.useState)("")),I=(0,s.Z)(N,2),L=(I[0],I[1],(0,r.useState)("")),_=(0,s.Z)(L,2),Y=(_[0],_[1],(0,r.useState)([])),k=(0,s.Z)(Y,2),F=k[0],C=k[1],T=(0,r.useState)([]),B=(0,s.Z)(T,2),P=B[0],z=B[1],A=(0,r.useState)(""),X=(0,s.Z)(A,2),M=X[0],J=X[1],V=(0,r.useState)(""),O=(0,s.Z)(V,2),R=(O[0],O[1]);(0,l.s0)();(0,r.useEffect)((function(){d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://3.136.240.37:9090/api/v1/","api/program-names")).then((function(e){var t=[];e.data.map((function(e,a){t.push({value:e.id,label:e.name})})),S(t)})).catch((function(e){401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire("Oops, something went wrong. Please try again later")})),d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://3.136.240.37:9090/api/v1/api","/student-statuses/").concat(b)).then((function(e){console.log("res",e),200===e.status&&C(e.data)})).catch((function(e){p().fire("No Student to promote")}))}),[]);var q={startDate:a.startDate,master:a.master,class:a.class},E={mode:"checkbox",showOnlySelected:!0,onSelect:function(e,t,s,r){if(t){var l=P;l.push(e),setTimeout((function(){z(l),h((0,n.Z)({},a))}),500)}else{var i=[];P.map((function(t,a){t.studentId!==e.studentId&&i.push(t)})),setTimeout((function(){z(i)}),500)}},onSelectAll:function(e,t,a){e&&z(t),e||z([])}};return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)(u.Ix,{}),a.loader?(0,v.jsx)(i.$j,{className:"loaderr",color:"primary",children:"Loading..."}):null,(0,v.jsx)(i.Zb,{children:(0,v.jsxs)(i.eW,{className:"cardbg",children:[(0,v.jsx)("h4",{children:(0,v.jsxs)("strong",{children:["Belt Testing (",b,")"]})}),(0,v.jsx)(i.Zb,{className:"attendencecard",children:(0,v.jsx)(o.J9,{enableReinitialize:"true",initialValues:q,onSubmit:function(e){J(!0);var t=[];P.map((function(e,a){t.push({levelId:e.currentLevel?e.currentLevel.id:null,studentId:e.studentId,certificateName:e.certificate&&e.certificate.backgroundPhoto?e.certificate.backgroundPhoto:null})})),setTimeout((function(){d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.post("".concat("http://3.136.240.37:9090/api/v1/api","/level-testing/promote"),t).then((function(e){if(J(!1),201===e.status){var t=F.filter((function(e){return!P.some((function(t){return t.studentId===e.studentId}))}));C(t),z([]),R(!0),u.Am.success("Successfully",{theme:"colored"})}})).catch((function(e){J(!1),401===e.response.status?p().fire("401 session expired..!","Please re-login"):p().fire(e.response.data.message,"Please try again later")}))}),500)},children:function(e){var t=e.values,a=(e.handleChange,e.handleSubmit);e.errors,e.touched,e.handleBlur,e.isValid,e.dirty,e.setFieldValue;return(0,v.jsxs)(o.l0,{className:"add-edit-user-form",onSubmit:a,children:[(0,v.jsxs)(i.X2,{children:[(0,v.jsx)(i.JX,{md:3,children:(0,v.jsxs)(i.cw,{children:[(0,v.jsx)(i.__,{for:"startDate",children:"Search By Date"}),(0,v.jsx)(g(),{className:"studentsattendancecolor",name:"startDate",selected:t.startDate?new Date(t.startDate):null,onChange:function(e){return function(e,t){t.startDate=e,h((0,n.Z)({},t));var a=m()(e).format("YYYY-MM-DD");d.Z.defaults.headers.common.Authorization="Bearer "+localStorage.getItem("token"),d.Z.get("".concat("http://3.136.240.37:9090/api/v1/api","/student-statuses/").concat(a)).then((function(e){200===e.status&&C(e.data)})).catch((function(e){C([]),p().fire("No Student to promote")}))}(e,t)},placeholderText:"mm/dd/yyyy"})]})}),(0,v.jsx)(i.JX,{md:2,children:(0,v.jsx)(i.cw,{style:{marginTop:"14%"},children:(0,v.jsx)(i.zx,{type:"submit",disabled:P.length<=0,children:"Promote"})})})]}),(0,v.jsx)(i.X2,{children:(0,v.jsx)("div",{className:"d-flex justify-content-center",children:M?(0,v.jsx)(j.LQ,{color:"success",style:{width:"3rem",height:"3rem"}}):null})})]})}})}),(0,v.jsx)("hr",{}),(0,v.jsx)(i.X2,{className:"rowborder",children:(0,v.jsx)(i.Zb,{className:"marginStyleForTablee",children:(0,v.jsxs)(c.c8,{data:F,selectRow:E,keyField:"studentId",search:!0,tableContainerClass:"studenttablescro",multiColumnSearch:"true",children:[(0,v.jsx)(c.bY,{width:"100",dataField:"studentId",hidden:!0,children:"unique field"}),(0,v.jsx)(c.bY,{width:"150",dataField:"studentName",children:"Student Name"}),(0,v.jsx)(c.bY,{width:"150",dataField:"currentLevel",dataFormat:function(e,t){return(0,v.jsx)("span",{children:t.currentLevel.name?t.currentLevel.name:null})},children:"Current Level"}),(0,v.jsx)(c.bY,{width:"130",dataField:"nextLevel",dataFormat:function(e,t){return(0,v.jsx)("span",{children:t.nextLevel.name?t.nextLevel.name:null})},children:"Next Level"}),(0,v.jsx)(c.bY,{width:"100",dataField:"phone",dataFormat:function(e,t){var a="";return t.subLevels&&t.subLevels.map((function(e,t){a=0===t?e.shortName:a+", "+e.shortName})),a},children:"Tip"})]})})}),(0,v.jsx)(i.X2,{})]})})]})}}}]);
//# sourceMappingURL=6768.ff196bc5.chunk.js.map